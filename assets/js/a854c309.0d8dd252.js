"use strict";(self.webpackChunklinkis_web_apache=self.webpackChunklinkis_web_apache||[]).push([[4484],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),p=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=p(n),c=r,k=m["".concat(i,".").concat(c)]||m[c]||u[c]||l;return n?a.createElement(k,o(o({ref:t},d),{},{components:n})):a.createElement(k,o({ref:t},d))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=m;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var p=2;p<l;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},23427:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>s,toc:()=>i});var a=n(87462),r=(n(67294),n(3905));const l={title:"SpringMVC Replaces Jersey",sidebar_position:5},o=void 0,s={unversionedId:"development/springmvc-replaces-jersey",id:"version-1.0.3/development/springmvc-replaces-jersey",isDocsHomePage:!1,title:"SpringMVC Replaces Jersey",description:"This article mainly introduces the linkis-1.0.3 version, how to use Spring REST to replace the jersey REST mode. Before version 1.0.3, the REST web services provided by linkis used the jersey architecture. The reason for the replacement is mainly to consider//www.apache.org/legal/resolved.html#); 2. linkis itself is a project developed based on Spring, using Spring REST It is more friendly to combine with Feign.",source:"@site/versioned_docs/version-1.0.3/development/springmvc-replaces-jersey.md",sourceDirName:"development",slug:"/development/springmvc-replaces-jersey",permalink:"/docs/1.0.3/development/springmvc-replaces-jersey",editUrl:"https://github.com/apache/incubator-linkis-website/edit/dev/versioned_docs/version-1.0.3/development/springmvc-replaces-jersey.md",tags:[],version:"1.0.3",sidebarPosition:5,frontMatter:{title:"SpringMVC Replaces Jersey",sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Linkis Console Compile",permalink:"/docs/1.0.3/development/web-build"},next:{title:"Overview",permalink:"/docs/1.0.3/upgrade/overview"}},i=[{value:"Servlet Adjustment",id:"servlet-adjustment",children:[]},{value:"Request Returned Structure Adjustment",id:"request-returned-structure-adjustment",children:[]},{value:"Jackson Upgrade Replacement",id:"jackson-upgrade-replacement",children:[]},{value:"Annotation Comparison",id:"annotation-comparison",children:[]},{value:"Jackson Main Replacement Point",id:"jackson-main-replacement-point",children:[]}],p={toc:i};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"This article mainly introduces the linkis-1.0.3 version, how to use Spring REST to replace the jersey REST mode. Before version 1.0.3, the REST web services provided by linkis used the jersey architecture. The reason for the replacement is mainly to consider: 1. Lisence compliance issues (",(0,r.kt)("a",{parentName:"p",href:"https://www.apache.org/legal/resolved.html#)"},"https://www.apache.org/legal/resolved.html#)"),"; 2. linkis itself is a project developed based on Spring, using Spring REST It is more friendly to combine with Feign.")),(0,r.kt)("h2",{id:"servlet-adjustment"},"Servlet Adjustment"),(0,r.kt)("p",null,"linkis Before 1.0.3, the DataWorkCloudApplication startup class used jersey's ServletContainer when creating the web container of JettyServletWebServerFactory.\nReplaced by Spring's DispatcherServlet in 1.0.3. If there are other components based on the secondary development of linkis, and some rely on the DataWorkCloudApplication startup class, then the http service in the original jersey mode cannot be used directly."),(0,r.kt)("h2",{id:"request-returned-structure-adjustment"},"Request Returned Structure Adjustment"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Jersey: http request returns entity: javax.ws.rs.core.Response is the jersey mode http return entity, which is processed separately in jersey and encapsulated as Response")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The Spingmvc mode needs to be modified and returns directly to Message"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'  return Message.messageToResponse(Message.ok().data("test", data));\n=>\n  return Message.ok().data("test", data)\n')),(0,r.kt)("h2",{id:"jackson-upgrade-replacement"},"Jackson Upgrade Replacement"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"org.codehaus.jackson has been moved from codehaus to github since v2 and renamed to com.fasterxml.jackson"),(0,r.kt)("li",{parentName:"ul"},"The old version of jersey uses org.codehaus.jackson, and springmvc uses the new version of com.fasterxml.jackson. When replacing with springmvc style, you need to upgrade jackson")),(0,r.kt)("h2",{id:"annotation-comparison"},"Annotation Comparison"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"jersey annotations"),(0,r.kt)("th",{parentName:"tr",align:null},"springmvc annotations"),(0,r.kt)("th",{parentName:"tr",align:null},"remarks"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"@GET"),(0,r.kt)("td",{parentName:"tr",align:null},"@RequestMapping(method = RequestMethod.GET)"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"@POST"),(0,r.kt)("td",{parentName:"tr",align:null},"@RequestMapping(method = RequestMethod.POST)"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"@DELETE"),(0,r.kt)("td",{parentName:"tr",align:null},"@RequestMapping(method = RequestMethod.DELETE)"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"@PUT"),(0,r.kt)("td",{parentName:"tr",align:null},"@RequestMapping(method = RequestMethod.PUT)"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},'@Path("/dss")'),(0,r.kt)("td",{parentName:"tr",align:null},'@RequestMapping(path = "/dss)'),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},'@FormDataParam("system") String system'),(0,r.kt)("td",{parentName:"tr",align:null},'@RequestParam(value = "system",required = false)'),(0,r.kt)("td",{parentName:"tr",align:null},"request is false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},'@QueryParam("system") String system'),(0,r.kt)("td",{parentName:"tr",align:null},'@RequestParam(value = "system",required = false)'),(0,r.kt)("td",{parentName:"tr",align:null},"request is false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},'@PathParam("id") Long id'),(0,r.kt)("td",{parentName:"tr",align:null},'@PathVariable("id") Long id'),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"FormDataMultiPart form"),(0,r.kt)("td",{parentName:"tr",align:null},'@RequestParam("file") List\\<MultipartFile',">"," files"),(0,r.kt)("td",{parentName:"tr",align:null},"The default parameter name is file, the usage needs to be modified")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"@Context"),(0,r.kt)("td",{parentName:"tr",align:null},"Delete directly"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},'@DefaultValue("1000") @QueryParam("pageSize") int pageSize,'),(0,r.kt)("td",{parentName:"tr",align:null},'@RequestParam(value = "pageSize",defaultValue = "1000")'),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"@Consumes(MediaType.APPLICATION_JSON)"),(0,r.kt)("td",{parentName:"tr",align:null},'@RequestMapping(consumes = {"application/json"})'),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"@Produces(MediaType.APPLICATION_JSON)"),(0,r.kt)("td",{parentName:"tr",align:null},'@RequestMapping(produces = {"application/json"})'),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Parameter org.codehaus.jackson.JsonNode"),(0,r.kt)("td",{parentName:"tr",align:null},"@RequestBody com.fasterxml.jackson.databind.JsonNode jsonNode"),(0,r.kt)("td",{parentName:"tr",align:null},"The old version of jersey uses the old version of jackson, and springmvc uses the new version of JsonNode")))),(0,r.kt)("h2",{id:"jackson-main-replacement-point"},"Jackson Main Replacement Point"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"jackson-1.X methods: getBooleanValue(), getFields(), getElements(), getIntValue()\njackson-2.X methods: booleanValue(), fields(), elements() and intValue()\n\n")),(0,r.kt)("p",null,"For details, please refer to"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://stackoverflow.com/questions/55896802/upgrade-of-jackson-from-org-codehaus-jackson-to-com-fasterxml-jackson-version-1"},"https://stackoverflow.com/questions/55896802/upgrade-of-jackson-from-org-codehaus-jackson-to-com-fasterxml-jackson-version-1")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"http://www.cowtowncoder.com/blog/archives/2012/04/entry_469.html"},"http://www.cowtowncoder.com/blog/archives/2012/04/entry_469.html"))))}d.isMDXComponent=!0}}]);