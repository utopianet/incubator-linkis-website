<!doctype html>
<html class="docs-version-1.3.0" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Apache Linkis Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Apache Linkis Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Apache Linkis" href="/opensearch.xml"><title data-react-helmet="true">Development &amp; Debugging with Kubernetes | Apache Linkis</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://linkis.incubator.apache.org/docs/latest/development/debug-with-helm-charts"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="1.3.0"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-1.3.0"><meta data-react-helmet="true" property="og:title" content="Development &amp; Debugging with Kubernetes | Apache Linkis"><meta data-react-helmet="true" name="description" content="Preface"><meta data-react-helmet="true" property="og:description" content="Preface"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://linkis.incubator.apache.org/docs/latest/development/debug-with-helm-charts"><link data-react-helmet="true" rel="alternate" href="https://linkis.incubator.apache.org/docs/latest/development/debug-with-helm-charts" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://linkis.incubator.apache.org/zh-CN/docs/latest/development/debug-with-helm-charts" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://linkis.incubator.apache.org/docs/latest/development/debug-with-helm-charts" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://AE29KQB3IA-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.43be7c54.css">
<link rel="preload" href="/assets/js/runtime~main.8c2fcd23.js" as="script">
<link rel="preload" href="/assets/js/main.ffdafd4c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Apache Linkis Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo.png" alt="Apache Linkis Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Apache Linkis(Incubating)</b></a><a class="navbar__item navbar__link" href="/download/main">Download</a><a class="navbar__item navbar__link" href="/community/how-to-subscribe">Community</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/team">Team</a><a class="navbar__item navbar__link" href="/user">Users</a><a class="navbar__item navbar__link" href="/faq/main">FAQ</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/policies/privacy.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">Doc</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/latest/introduction">1.3.0</a></li><li><a class="dropdown__link" href="/docs/1.2.0/introduction">1.2.0</a></li><li><a class="dropdown__link" href="/docs/1.1.3/introduction">1.1.3</a></li><li><a class="dropdown__link" href="/docs/1.1.2/introduction">1.1.2</a></li><li><a class="dropdown__link" href="/docs/1.1.1/introduction">1.1.1</a></li><li><a class="dropdown__link" href="/docs/1.1.0/introduction">1.1.0</a></li><li><a class="dropdown__link" href="/docs/1.0.3/introduction">1.0.3</a></li><li><a class="dropdown__link" href="/docs/1.0.2/introduction">1.0.2</a></li><li><a class="dropdown__link" href="/docs/0.11.0/introduction">0.11.0</a></li><li><a class="dropdown__link" href="/docs/1.3.1/introduction">Next(1.3.1)</a></li><li><a class="dropdown__link" href="/versions">All Version</a></li></ul></div><a href="https://github.com/apache/incubator-linkis" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg t="1631348384596" class="iconLanguage_EbrZ" viewBox="0 0 1024 1024" version="1.1" p-id="557" width="20" height="20"><path d="M547.797333 638.208l-104.405333-103.168 1.237333-1.28a720.170667 720.170667 0 0 0 152.490667-268.373333h120.448V183.082667h-287.744V100.906667H347.605333v82.218666H59.818667V265.386667h459.178666a648.234667 648.234667 0 0 1-130.304 219.946666 643.242667 643.242667 0 0 1-94.976-137.728H211.541333a722.048 722.048 0 0 0 122.453334 187.434667l-209.194667 206.378667 58.368 58.368 205.525333-205.525334 127.872 127.829334 31.232-83.84m231.424-208.426667h-82.218666l-184.96 493.312h82.218666l46.037334-123.306667h195.242666l46.464 123.306667h82.218667l-185.002667-493.312m-107.690666 287.744l66.56-178.005333 66.602666 178.005333z" fill="currentColor" p-id="558"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/latest/development/debug-with-helm-charts" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/zh-CN/docs/latest/development/debug-with-helm-charts" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">简体中文</a></li></ul></div><div class="searchBox_Bc3W"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/latest/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/latest/release">Version Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deployment</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">User Guide</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Engine Usage</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">API</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Table Structure</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Architecture</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Development</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/latest/development/build">How to Build</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/latest/development/build-console">How to Build Console</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/latest/development/build-docker">How to Build Docker Image</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/latest/development/debug">Service Debugging Guide</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/latest/development/debug-with-helm-charts">Development &amp; Debugging with Kubernetes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/latest/development/new-engine-conn">Quickly Implement New Engine</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/latest/development/swwager">Swagger Annotation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/latest/development/config">Configuration Parameters</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Upgrade Guide</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tuning And Troubleshooting</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><span class="theme-doc-version-badge badge badge--secondary">Version: 1.3.0</span><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Development &amp; Debugging with Kubernetes</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="preface"></a>Preface<a class="hash-link" href="#preface" title="Direct link to heading">#</a></h2><p>This document describes how to use Kubernetes technology to simplify the development and debugging of Linkis projects. Before the introduction of Kubernetes tools, debugging Linkis was a very tedious and complex task, and sometimes it might be necessary to set up a Hadoop cluster for test. To improve this problem, we introduce an alternative approach , using Kubernetes technology, to create a Hadoop cluster on the development machine and pull up all Linkis services, which is a distributed environment and can be pulled up and destroyed at any time, and the developer connects to these services to performs step-by-step debugging through the JVM remote debugger. Here we use the following technologies:</p><ul><li>Docker: A containerization technology to support the creation and use of Linux containers;</li><li>Kubernetes: An open source platform that automates the deployment and management of Linux containers, Kubernetes also integrates networking, storage, security, telemetry and other services to provide a comprehensive container-based infrastructure;</li><li>KinD: A tool that uses Docker containers as &quot;Kubernetes nodes&quot; to run local Kubernetes clusters;</li><li>Helm: An open source package management tool on Kubernetes that manages user resources on Kubernetes via the Helm command line tool and installation package (Chart);</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="introduction-to-dependency-tools"></a>Introduction to Dependency Tools<a class="hash-link" href="#introduction-to-dependency-tools" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="version-requirements"></a>Version Requirements<a class="hash-link" href="#version-requirements" title="Direct link to heading">#</a></h3><ul><li><a href="https://docs.docker.com/get-docker/" target="_blank" rel="noopener noreferrer">Docker</a>, minimum version v20.10.8+</li><li><a href="https://kubernetes.io/docs/setup/" target="_blank" rel="noopener noreferrer">Kubernetes</a>, minimum version v1.21.0+</li><li><a href="https://helm.sh/docs/intro/install/" target="_blank" rel="noopener noreferrer">Helm</a>, minimum version v3.0.0+.</li><li><a href="https://kind.sigs.k8s.io/docs/user/quick-start/" target="_blank" rel="noopener noreferrer">KinD</a>, minimum version v0.11.0+.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="introduction-to-helm-charts"></a>Introduction to Helm Charts<a class="hash-link" href="#introduction-to-helm-charts" title="Direct link to heading">#</a></h3><p>Helm is an open source package management tool on Kubernetes. Helm&#x27;s original goal was to provide users with a better way to manage all Kubernetes YAML files created on Kubernetes. When using Charts, the user provides a variable file, Helm uses the variables defined in this variable file to render the corresponding Chart, produce a Kubernetes YAML file, and then invoke the Kubernetes api to create the resources. Each Charts released to Kubernetes is called a Release, and a Chart can typically be installed multiple times into the same cluster, with a new Release being created each time it is installed.</p><p>Helm is relatively simple to install, please refer to the official documentation for installation: <a href="https://helm.sh/docs/intro/install/" target="_blank" rel="noopener noreferrer">Installing Helm</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="introduction-to-kind"></a>Introduction to KinD<a class="hash-link" href="#introduction-to-kind" title="Direct link to heading">#</a></h3><p>Creating a Kubernetes test environment locally is a very common requirement, and the Kubernetes community offers a variety of solutions, such as MiniKube or MicroK8s. KinD, as the name suggests (Kubernetes in Docker), it uses Docker container to host nodes to create a test-oriented Kubernetes cluster.</p><p>KinD Architecture</p><p><img src="/assets/images/kind-arc-02ed1f9367e7e49f600fa20cf3cf952f.png"></p><p>Deploying KinD is also very easy, please refer to the official deployment documentation: <a href="https://kind.sigs.k8s.io/docs/user/quick-start/#installation" target="_blank" rel="noopener noreferrer">KinD Installation</a>, please install Docker before install KinD.</p><blockquote><p>⚠️ Note:
KinD is a tool for testing purposes and cannot be used for production deployments. For example, KinD clusters cannot be used after the development machine is rebooted and need to be recreated (because KinD performs a series of initialization tasks after the Node container is created, which cannot be automatically reverted after the machine is rebooted).</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="linkis-containerized-components"></a>Linkis Containerized Components<a class="hash-link" href="#linkis-containerized-components" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="linkis-images"></a>Linkis Images<a class="hash-link" href="#linkis-images" title="Direct link to heading">#</a></h3><p>Linkis provides several images, all of which have their Dockerfile and related scripts in the <code>linkis-dist/docker</code> directory. Linkis images include the following.</p><ul><li><code>linkis</code>: The Linkis service image, which contains binary packages of all components of Apache Linkis and various scripts.</li><li><code>linkis-web</code>: Linkis Web console image, which contains the binary packages and various scripts of the Apache Linkis Web console, using nginx as the web server.</li><li><code>linkis-ldh</code>: LDH is a test-oriented image, LDH image provides a complete, pseudo-distributed mode Apache Hadoop runtime environment, including HDFS, YARN, HIVE, Spark, Flink and Zookeeper, can be easily pulled up in the development environment of a fully real Hadoop environment to test the functionality of Linkis.</li></ul><p>For details, please refer to: <a href="https://linkis.apache.org/zh-CN/docs/latest/development/linkis_docker_build_instrument" target="_blank" rel="noopener noreferrer">Linkis Docker Image Package</a>. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="linkis-helm-chart"></a>Linkis Helm Chart<a class="hash-link" href="#linkis-helm-chart" title="Direct link to heading">#</a></h3><p>Linkis Helm Chart is a Helm installation package developed according to the Helm Chart specification and is located in the <code>linkis-dist/helm</code> directory. The module directory structure is as follows:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-dist/helm</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── charts                                 </span><span class="token comment" style="color:rgb(98, 114, 164)"># Charts directory, currently only contains Linkis Helm Chart</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ └── linkis                               </span><span class="token comment" style="color:rgb(98, 114, 164)"># Linkis Helm Chart directory</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ ├── Chart.yaml                           </span><span class="token comment" style="color:rgb(98, 114, 164)"># - Chart metadata</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ ├── templates                            </span><span class="token comment" style="color:rgb(98, 114, 164)"># - Chart template file containing Kubernetes YAML templates for all linkis components</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ ├── NOTES.txt                          </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Chart notes</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ ├── _helpers.tpl                       </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Chart variable helper templates</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ ├── configmap-init-sql.yaml            </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Database initialization SQL script template</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ ├── configmap-linkis-config.yaml       </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Linkis service configuration file template</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ ├── configmap-linkis-web-config.yaml   </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Linkis Web Console configuration file template</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ ├── jobs.yaml                          </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Kubernetes Job template, currently only includes a database initialization job, the database</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">                                      </span><span class="token comment" style="color:rgb(98, 114, 164)">#     initialization SQL script will be executed by the job</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ ├── linkis-cg-engineconnmanager.yaml   </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Linkis EngineConnManager deployment template, which is a Kubernetes Deployment type workload</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ ├── linkis-cg-engineplugin.yaml        </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Linkis EngineConn deployment template, a Kubernetes Deployment type workload</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ ├── linkis-cg-entrance.yaml            </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Linkis Entrance deployment template, a Kubernetes Deployment type workload</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ ├── linkis-cg-linkismanager.yaml       </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Linkis Manager deployment template, a Kubernetes Deployment type workload</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ ├── linkis-mg-eureka.yaml              </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Linkis Eureka deployment template, a Kubernetes Statefulset type workload</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ ├── linkis-mg-gateway.yaml             </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Linkis Gateway deployment template, a Kubernetes Deployment type workload</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ ├── linkis-ps-publicservice.yaml       </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Linkis PublicService deployment template, a Kubernetes Deployment type workload</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ ├── linkis-web.yaml                    </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Linkis Web Console deployment template, a Kubernetes Deployment type workload</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ └── serviceaccount.yaml                </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Linkis related Kubernetes Service Account template</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ └── values.yaml                          </span><span class="token comment" style="color:rgb(98, 114, 164)"># - Linkis Helm Chart variable file, which provides Linkis Local schema related variables by default</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── scripts                                </span><span class="token comment" style="color:rgb(98, 114, 164)"># Some tool scripts to simplify development and debugging</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ ├── common.sh                            </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - public scripts, defining some public methods and variables</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ ├── create-kind-cluster.sh               </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Creates KinD clusters</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ ├── install-charts-with-ldh.sh           </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Deploy Linkis service on KinD cluster, using On-LDH deployment method, calling install-linkis.sh</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ ├── install-charts.sh                    </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Deploy Linkis service on KinD cluster, use Local deployment method, call install-linkis.sh</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ ├── install-ldh.sh                       </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Deploy LDH deployments on KinD clusters</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ ├── install-linkis.sh                    </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Deploy the Linkis service on the KinD cluster, either in Local or On-LDH mode</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ ├── install-mysql.sh                     </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Deploy a MySQL instance on the KinD cluster</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ ├── login-pod.sh                         </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Login to a Pod and open Bash for interaction</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ ├── remote-debug-proxy.sh                </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - Turn on the JVM remote debug proxy</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ └── resources                            </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - some resource files</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ ├── kind-cluster.yaml                    </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - KinD cluster configuration, default is single Node </span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ ├── ldh                                  </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - LDH related resource files</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ │ ├── configmaps                       </span><span class="token comment" style="color:rgb(98, 114, 164)">#     - LDH configuration files for each component</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ │ │ ├── configmap-flink.yaml           </span><span class="token comment" style="color:rgb(98, 114, 164)">#       - Flink configuration file</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ │ │ ├── configmap-hadoop.yaml          </span><span class="token comment" style="color:rgb(98, 114, 164)">#       - Hdfs &amp; Yarn configuration file</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ │ ├── configmap-hive.yaml              </span><span class="token comment" style="color:rgb(98, 114, 164)">#       - Hive configuration file</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ │ ├── configmap-spark.yaml             </span><span class="token comment" style="color:rgb(98, 114, 164)">#       - Spark configuration file</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ │ └── configmap-zookeeper.yaml         </span><span class="token comment" style="color:rgb(98, 114, 164)">#       - Zookeeper configuration file</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ └── ldh.yaml                           </span><span class="token comment" style="color:rgb(98, 114, 164)">#   - LDH Kubernetes YAML, used to deploy LDH instances on KinD</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ └── mysql.yaml                           </span><span class="token comment" style="color:rgb(98, 114, 164)"># - MySQL Kubernetes YAML, for deploying MySQL instances on KinD</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This project provides a set of tool scripts for quickly creating a Linkis environment for development testing. For production deployment, you need to modify the <code>values.yaml</code> file according to the actual cluster, and then deploy it using the Helm CLI. There are two common approaches to deploying with the Helm CLI:</p><ol><li>deploy directly using the <code>helm install</code> command. This is suitable for non-customized deployments.</li><li>use the <code>helm template</code> command to generate Kubernetes YAML files, then manually modify these files, add custom configuration, and then deploy using the <code>kubectl apply</code> command. For advanced users who need to customize Kubernetes features that are not supported by Linkis Helm Charts, such as the need to use specific StorageClass or PVs.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="ldh"></a>LDH<a class="hash-link" href="#ldh" title="Direct link to heading">#</a></h3><p>LDH is a Hadoop cluster image for testing purposes, which provides a pseudo-distributed hadoop cluster for quick testing of On Hadoop deployment mode.
This image contains the following hadoop components, and the default mode of the engine in LDH is on-yarn.</p><ul><li>Hadoop 2.7.2 , included HDFS and YARN</li><li>Hive 2.3.3</li><li>Spark 2.4.3</li><li>Flink 1.12.2</li><li>ZooKeeper 3.5.9</li></ul><p>LDH will start some initialization operations, such as format hdfs, create the initialization directory on HDFS, etc., these operations are defined in <code>linkis-dist/docker/scripts/entry-point-ldh.sh</code> file, add, modify, delete some initialization operations need to recreate LDH image to take effect. </p><p>In addition, the Hive component in LDH depends on external MySQL instance, you need to deploy MySQL instance first before you can use the Hive component in LDH.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># Create a KinD cluster and deploy Linkis and LDH instances</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"> ./scripts/create-kind-cluster.sh </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"> ./scripts/install-mysql.sh </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"> ./scripts/install-ldh.sh</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Quick Experience on LDH</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> kubectl </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">exec</span><span class="token plain"> -it -n ldh </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">kubectl get pod -n ldh -o </span><span class="token variable assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">jsonpath</span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">=</span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&#x27;{.items[0].metadata.name}&#x27;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"> -- </span><span class="token function" style="color:rgb(80, 250, 123)">bash</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ldh-96bdc757c-dnkbs /</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># hdfs dfs -ls /</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Found </span><span class="token number">4</span><span class="token plain"> items</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">drwxrwxrwx   - root supergroup          </span><span class="token number">0</span><span class="token plain"> </span><span class="token number">2022</span><span class="token plain">-07-31 02:48 /completed-jobs</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">drwxrwxrwx   - root supergroup          </span><span class="token number">0</span><span class="token plain"> </span><span class="token number">2022</span><span class="token plain">-07-31 02:48 /spark2-history</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">drwxrwxrwx   - root supergroup          </span><span class="token number">0</span><span class="token plain"> </span><span class="token number">2022</span><span class="token plain">-07-31 02:49 /tmp</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">drwxrwxrwx   - root supergroup          </span><span class="token number">0</span><span class="token plain"> </span><span class="token number">2022</span><span class="token plain">-07-31 02:48 /user</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ldh-96bdc757c-dnkbs /</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># beeline -u jdbc:hive2://ldh.ldh.svc.cluster.local:10000/ -n hadoop</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Connecting to jdbc:hive2://ldh.ldh.svc.cluster.local:10000/</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Connected to: Apache Hive </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">version </span><span class="token number">2.3</span><span class="token plain">.3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Driver: Hive JDBC </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">version </span><span class="token number">2.3</span><span class="token plain">.3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Transaction isolation: TRANSACTION_REPEATABLE_READ</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Beeline version </span><span class="token number">2.3</span><span class="token plain">.3 by Apache Hive</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain">: jdbc:hive2://ldh.ldh.svc.cluster.local:10</span><span class="token operator file-descriptor important">0</span><span class="token operator">&gt;</span><span class="token plain"> create database demo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">No rows affected </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1.306</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain">: jdbc:hive2://ldh.ldh.svc.cluster.local:10</span><span class="token operator file-descriptor important">0</span><span class="token operator">&gt;</span><span class="token plain"> use demo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">No rows affected </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.046</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain">: jdbc:hive2://ldh.ldh.svc.cluster.local:10</span><span class="token operator file-descriptor important">0</span><span class="token operator">&gt;</span><span class="token plain"> create table t1 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">id int, data string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">No rows affected </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.709</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain">: jdbc:hive2://ldh.ldh.svc.cluster.local:10</span><span class="token operator file-descriptor important">0</span><span class="token operator">&gt;</span><span class="token plain"> insert into t1 values</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token plain">, </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;linikis demo&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WARNING: Hive-on-MR is deprecated </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> Hive </span><span class="token number">2</span><span class="token plain"> and may not be available </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> the future versions. Consider using a different execution engine </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">i.e. spark, tez</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> or using Hive </span><span class="token number">1</span><span class="token plain">.X releases.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">No rows affected </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">5.491</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain">: jdbc:hive2://ldh.ldh.svc.cluster.local:10</span><span class="token operator file-descriptor important">0</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> * from t1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+--------+---------------+</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> t1.id  </span><span class="token operator">|</span><span class="token plain">    t1.data    </span><span class="token operator">|</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+--------+---------------+</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain">      </span><span class="token operator">|</span><span class="token plain"> linikis demo  </span><span class="token operator">|</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+--------+---------------+</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">1</span><span class="token plain"> row selected </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.39</span><span class="token plain"> seconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain">: jdbc:hive2://ldh.ldh.svc.cluster.local:10</span><span class="token operator file-descriptor important">0</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">!</span><span class="token plain">q</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ldh-96bdc757c-dnkbs /</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># spark-sql</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:18 INFO hive.metastore: Trying to connect to metastore with URI thrift://ldh.ldh.svc.cluster.local:9083</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:18 INFO hive.metastore: Connected to metastore.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:19 INFO spark.SparkContext: Running Spark version </span><span class="token number">2.4</span><span class="token plain">.3</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:19 INFO spark.SparkContext: Submitted application: SparkSQL::10.244.0.6</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:27 INFO yarn.Client: Submitting application application_1659235712576_0001 to ResourceManager</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:27 INFO impl.YarnClientImpl: Submitted application application_1659235712576_0001</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:27 INFO cluster.SchedulerExtensionServices: Starting Yarn extension services with app application_1659235712576_0001 and attemptId None</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:28 INFO yarn.Client: Application report </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> application_1659235712576_0001 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">state: ACCEPTED</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:36 INFO yarn.Client: Application report </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> application_1659235712576_0001 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">state: RUNNING</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Spark master: yarn, Application Id: application_1659235712576_0001</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:53:46 INFO thriftserver.SparkSQLCLIDriver: Spark master: yarn, Application Id: application_1659235712576_0001</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spark-sql</span><span class="token operator">&gt;</span><span class="token plain"> use demo</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Time taken: </span><span class="token number">0.074</span><span class="token plain"> seconds</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">22</span><span class="token plain">/07/31 02:58:02 INFO thriftserver.SparkSQLCLIDriver: Time taken: </span><span class="token number">0.074</span><span class="token plain"> seconds</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spark-sql</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">select</span><span class="token plain"> * from t1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">1</span><span class="token plain">       linikis demo</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">2</span><span class="token plain">       linkis demo spark sql</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Time taken: </span><span class="token number">3.352</span><span class="token plain"> seconds, Fetched </span><span class="token number">2</span><span class="token plain"> row</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">s</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spark-sql</span><span class="token operator">&gt;</span><span class="token plain"> quit</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ldh-96bdc757c-dnkbs /</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># zkCli.sh</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Connecting to localhost:2181</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Welcome to ZooKeeper</span><span class="token operator">!</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">JLine support is enabled</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WATCHER::</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WatchedEvent state:SyncConnected type:None path:null</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">zk: localhost:2181</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">CONNECTED</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> get -s /zookeeper/quota</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cZxid </span><span class="token operator">=</span><span class="token plain"> 0x0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ctime </span><span class="token operator">=</span><span class="token plain"> Thu Jan 01 00:00:00 UTC </span><span class="token number">1970</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mZxid </span><span class="token operator">=</span><span class="token plain"> 0x0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mtime </span><span class="token operator">=</span><span class="token plain"> Thu Jan 01 00:00:00 UTC </span><span class="token number">1970</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pZxid </span><span class="token operator">=</span><span class="token plain"> 0x0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cversion </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dataVersion </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">aclVersion </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ephemeralOwner </span><span class="token operator">=</span><span class="token plain"> 0x0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dataLength </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">numChildren </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">zk: localhost:2181</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">CONNECTED</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> quit</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Start a Flink job in per-job cluster mode</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ldh-96bdc757c-dnkbs /</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># HADOOP_CLASSPATH=`hadoop classpath` flink run -t yarn-per-job /opt/ldh/current/flink/examples/streaming/TopSpeedWindowing.jar</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Start Flink jobs in session mode,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Flink session is started when LDH Pod starts.</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">root@ldh-96bdc757c-dnkbs /</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token comment" style="color:rgb(98, 114, 164)"># flink run /opt/ldh/current/flink/examples/streaming/TopSpeedWindowing.jar</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Executing TopSpeedWindowing example with default input data set.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Use --input to specify </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"> input.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Printing result to stdout. Use --output to specify output path.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="kind-cluster"></a>KinD Cluster<a class="hash-link" href="#kind-cluster" title="Direct link to heading">#</a></h3><p>The default KinD cluster description file used by the Linkis project is <code>linkis-dist/helm/scripts/resources/kind-cluster.yaml</code>, which creates a KinD cluster with one node by default. Multiple nodes can be added by remove the comments.</p><blockquote><p>⚠️Note that KinD clusters are for testing purposes only.</p></blockquote><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># linkis-dist/helm/scripts/resources/kind-cluster.yaml</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">kind</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> Cluster</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">apiVersion</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> kind.x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">k8s.io/v1alpha4</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">nodes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">role</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> control</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">plane</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">extraMounts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">hostPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">KIND_CLUSTER_HOST_PATH</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">     </span><span class="token comment" style="color:rgb(98, 114, 164)"># Points to a directory on the development machine. This directory </span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                </span><span class="token comment" style="color:rgb(98, 114, 164)"># is mapped to the `/data` directory in the Kind Node container, which</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                </span><span class="token comment" style="color:rgb(98, 114, 164)"># Linkis Helm Charts uses by default as the data directory to mount into </span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                </span><span class="token comment" style="color:rgb(98, 114, 164)"># the Pod of each Linkis component. When Linkis is deployed in Local mode, </span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                </span><span class="token comment" style="color:rgb(98, 114, 164)"># all components actually use the same directory on the development machine</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                </span><span class="token comment" style="color:rgb(98, 114, 164)"># as if they were on the same machine, thus emulating the behavior of Local</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                </span><span class="token comment" style="color:rgb(98, 114, 164)"># mode. When deployed in On-Hadoop mode, this directory is not used.</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">containerPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> /data</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#  - role: worker                               # Remove comments to add 2 KinD nodes. Adding KinD nodes increases the time </span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                </span><span class="token comment" style="color:rgb(98, 114, 164)"># it takes to load Docker images to the KinD cluster, so it is not turned on </span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                </span><span class="token comment" style="color:rgb(98, 114, 164)"># by default. </span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#    extraMounts:</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#      - hostPath: ${KIND_CLUSTER_HOST_PATH}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#        containerPath: /data</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#  - role: worker</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#    extraMounts:</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#      - hostPath: ${KIND_CLUSTER_HOST_PATH}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#        containerPath: /data</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="developing-and-debugging-with-linkis-containerized-components"></a>Developing and Debugging with Linkis Containerized Components<a class="hash-link" href="#developing-and-debugging-with-linkis-containerized-components" title="Direct link to heading">#</a></h2><p>The following steps describe how to develop and debug using Linkis containerized components (currently only supported for Linux and MacOS). Please confirm the following before proceeding.</p><ol><li>whether the Docker engine is already installed on the development machine</li><li>whether Helm is installed on the development machine </li><li>whether KinD has been installed on the development machine </li><li>whether the Linkis image has been created as described in <a href="https://linkis.apache.org/zh-CN/docs/latest/development/linkis_docker_build_instrument" target="_blank" rel="noopener noreferrer">Linkis Docker image packaging</a></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="create-debugging-environment"></a>Create Debugging Environment<a class="hash-link" href="#create-debugging-environment" title="Direct link to heading">#</a></h3><p>This step will create a KinD cluster and deploy MySQL, Linkis and LDH instances on it.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> linkis-dist/helm</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"> ./scripts/create-kind-cluster.sh </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain">    </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"> ./scripts/install-mysql.sh </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain">    </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"> ./scripts/install-ldh.sh </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain">    </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"> ./scripts/install-charts-with-ldh.sh</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Creating KinD cluster ...</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- kind cluster config: /var/folders/9d/bb6ggdm177j25q40yf5d50dm0000gn/T/kind-XXXXX.Fc2dFJbG/kind-cluster.yaml</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kind: Cluster</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">apiVersion: kind.x-k8s.io/v1alpha4</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nodes:</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  - role: control-plane</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    extraMounts:</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      - hostPath: /var/folders/9d/bb6ggdm177j25q40yf5d50dm0000gn/T/kind-XXXXX.Fc2dFJbG/data</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        containerPath: /data</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Creating cluster </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;test-helm&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ✓ Ensuring node image </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">kindest/node:v1.21.1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> 🖼 </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ✓ Preparing nodes 📦  </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ✓ Writing configuration 📜 </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ✓ Starting control-plane 🕹️ </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ✓ Installing CNI 🔌 </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ✓ Installing StorageClass 💾 </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Set kubectl context to </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;kind-test-helm&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">You can now use your cluster with:</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">kubectl cluster-info --context kind-test-helm</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Have a </span><span class="token function" style="color:rgb(80, 250, 123)">nice</span><span class="token plain"> day</span><span class="token operator">!</span><span class="token plain"> 👋</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Loading MySQL image ...</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Image: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;mysql:5.7&quot;</span><span class="token plain"> with ID </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sha256:3147495b3a5ce957dee2319099a8808c1418e0b0a2c82c9b2396c5fb4b688509&quot;</span><span class="token plain"> not yet present on node </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;test-helm-control-plane&quot;</span><span class="token plain">, loading</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Deploying MySQL ...</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">namespace/mysql created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">service/mysql created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">deployment.apps/mysql created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># LDH version: dev</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Loading LDH image ...</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Image: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;linkis-ldh:dev&quot;</span><span class="token plain"> with ID </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sha256:aa3bde0a31bf704413fb75673fc2894b03a0840473d8fe15e2d7f7dd22f1f854&quot;</span><span class="token plain"> not yet present on node </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;test-helm-control-plane&quot;</span><span class="token plain">, loading</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Deploying LDH ...</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">namespace/ldh created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/flink-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/hadoop-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/hive-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/spark-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/zookeeper-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">service/ldh created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">deployment.apps/ldh created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Loading Linkis image ...</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Image: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;linkis:dev&quot;</span><span class="token plain"> with ID </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sha256:0dfa7882c4216305a80cf57efa8cfb483d006bae5ba931288ffb8025e1db4e58&quot;</span><span class="token plain"> not yet present on node </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;test-helm-control-plane&quot;</span><span class="token plain">, loading</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Image: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;linkis-web:dev&quot;</span><span class="token plain"> with ID </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sha256:1dbe0e9319761dbe0e93197665d38077cb2432b8b755dee834928694875c8a22&quot;</span><span class="token plain"> not yet present on node </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;test-helm-control-plane&quot;</span><span class="token plain">, loading</span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Installing linkis, image tag=dev,local mode=false ...</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME: linkis-demo</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAMESPACE: linkis</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">STATUS: deployed</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">REVISION: </span><span class="token number">1</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">TEST SUITE: None</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NOTES:</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">---</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Welcome to Apache Linkis </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">v1.3.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">!</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">.___    .___ .______  .____/</span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"> .___ .________</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain">   </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> __</span><span class="token operator">|</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain">   /  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain">: __</span><span class="token operator">||</span><span class="token plain">    ___/</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain">       </span><span class="token operator">||</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">.</span><span class="token plain">  ___/</span><span class="token operator">|</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain">___    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain">/</span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">||</span><span class="token plain">   </span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">||</span><span class="token plain">     </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">||</span><span class="token plain">       /</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">   /  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">||</span><span class="token plain">___</span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">||</span><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token operator">|</span><span class="token plain">   </span><span class="token operator">||</span><span class="token plain">__:___/</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">|</span><span class="token plain">______/</span><span class="token operator">|</span><span class="token plain">___</span><span class="token operator">|</span><span class="token plain">    </span><span class="token operator">|</span><span class="token plain">___</span><span class="token operator">||</span><span class="token plain">___</span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain">  /</span><span class="token operator">|</span><span class="token plain">___</span><span class="token operator">|</span><span class="token plain">   </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> v1.3.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                           </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain">/</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Linkis builds a layer of computation middleware between upper applications and underlying engines.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Please visit https://linkis.apache.org/ </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> details.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Enjoy</span><span class="token operator">!</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/flink-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/hadoop-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/hive-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/spark-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">configmap/zookeeper-conf created</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> kubectl get pods -n ldh -o wide</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                   READY   STATUS    RESTARTS   AGE     IP           NODE                      NOMINATED NODE   READINESS GATES</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ldh-6648554447-ml2bn   </span><span class="token number">1</span><span class="token plain">/1     Running   </span><span class="token number">0</span><span class="token plain">          6m25s   </span><span class="token number">10.244</span><span class="token plain">.0.6   test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> kubectl get pods -n linkis -o wide</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME                                                READY   STATUS             RESTARTS   AGE     IP            NODE                      NOMINATED NODE   READINESS GATES</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">init-db-bcp85                                       </span><span class="token number">0</span><span class="token plain">/1     Completed          </span><span class="token number">0</span><span class="token plain">          4m52s   </span><span class="token number">10.244</span><span class="token plain">.0.14   test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-demo-cg-engineconnmanager-659bf85689-ddvhw   </span><span class="token number">1</span><span class="token plain">/1     Running            </span><span class="token number">1</span><span class="token plain">          4m52s   </span><span class="token number">10.244</span><span class="token plain">.0.7    test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-demo-cg-engineplugin-98bd6945-tsgjl          </span><span class="token number">1</span><span class="token plain">/1     Running            </span><span class="token number">1</span><span class="token plain">          4m52s   </span><span class="token number">10.244</span><span class="token plain">.0.10   test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-demo-cg-entrance-858f74c868-xrd82            </span><span class="token number">1</span><span class="token plain">/1     Running            </span><span class="token number">0</span><span class="token plain">          4m52s   </span><span class="token number">10.244</span><span class="token plain">.0.12   test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-demo-cg-linkismanager-6f96f69b8b-ns6st       </span><span class="token number">1</span><span class="token plain">/1     Running            </span><span class="token number">0</span><span class="token plain">          4m52s   </span><span class="token number">10.244</span><span class="token plain">.0.11   test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-demo-mg-eureka-0                             </span><span class="token number">1</span><span class="token plain">/1     Running            </span><span class="token number">0</span><span class="token plain">          4m52s   </span><span class="token number">10.244</span><span class="token plain">.0.13   test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-demo-mg-gateway-68ddb8c547-xgvhn             </span><span class="token number">1</span><span class="token plain">/1     Running            </span><span class="token number">0</span><span class="token plain">          4m52s   </span><span class="token number">10.244</span><span class="token plain">.0.15   test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-demo-ps-publicservice-6bbf99fcd7-sc922       </span><span class="token number">1</span><span class="token plain">/1     Running            </span><span class="token number">0</span><span class="token plain">          4m52s   </span><span class="token number">10.244</span><span class="token plain">.0.8    test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">linkis-demo-web-554bd7659f-nmdjl                    </span><span class="token number">1</span><span class="token plain">/1     Running            </span><span class="token number">0</span><span class="token plain">          4m52s   </span><span class="token number">10.244</span><span class="token plain">.0.9    test-helm-control-plane   </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain">           </span><span class="token operator">&lt;</span><span class="token plain">none</span><span class="token operator">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="debugging-components"></a>Debugging Components<a class="hash-link" href="#debugging-components" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_y2LR" id="enable-port-forwarding"></a>Enable Port Forwarding<a class="hash-link" href="#enable-port-forwarding" title="Direct link to heading">#</a></h4><p>Each component has a JVM remote debug port of 5005 within the container, and these ports are mapped to different ports on the host as follows.</p><ul><li>mg-eureka: 5001</li><li>mg-gateway: 5002</li><li>ps-publicservice: 5004</li><li>cg-linkismanager: 5007</li><li>cg-entrance: 5008</li><li>cg-engineconnmanager: 5009</li><li>cg-engineplugin: 5010</li></ul><p>In addition, the Web Console is mapped to port 8087 on the host, which can be accessed by typing <code>http://localhost:8087</code> in your browser.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> ./scripts/remote-debug-proxy.sh start      </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- starting port-forwad </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">web</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">8087</span><span class="token plain">:8087-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- starting port-forwad </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">mg-eureka</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5001</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- starting port-forwad </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">mg-gateway</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5002</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- starting port-forwad </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">ps-publicservice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5004</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- starting port-forwad </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">cg-linkismanager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5007</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- starting port-forwad </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">cg-entrance</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5008</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- starting port-forwad </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">cg-engineconnmanager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5009</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- starting port-forwad </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">cg-engineplugin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5010</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> ./scripts/remote-debug-proxy.sh list </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">user            </span><span class="token number">10972</span><span class="token plain">   </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.1</span><span class="token plain">  </span><span class="token number">5052548</span><span class="token plain">  </span><span class="token number">31244</span><span class="token plain"> s001  S    </span><span class="token number">12</span><span class="token plain">:57AM   </span><span class="token number">0</span><span class="token plain">:00.10 kubectl port-forward -n linkis pod/linkis-demo-cg-engineplugin-98bd6945-tsgjl </span><span class="token number">5010</span><span class="token plain">:5005 --address</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token plain">.0.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">user            </span><span class="token number">10970</span><span class="token plain">   </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.1</span><span class="token plain">  </span><span class="token number">5053060</span><span class="token plain">  </span><span class="token number">30988</span><span class="token plain"> s001  S    </span><span class="token number">12</span><span class="token plain">:57AM   </span><span class="token number">0</span><span class="token plain">:00.12 kubectl port-forward -n linkis pod/linkis-demo-cg-engineconnmanager-659bf85689-ddvhw </span><span class="token number">5009</span><span class="token plain">:5005 --address</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token plain">.0.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">user            </span><span class="token number">10968</span><span class="token plain">   </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.1</span><span class="token plain">  </span><span class="token number">5054084</span><span class="token plain">  </span><span class="token number">30428</span><span class="token plain"> s001  S    </span><span class="token number">12</span><span class="token plain">:57AM   </span><span class="token number">0</span><span class="token plain">:00.10 kubectl port-forward -n linkis pod/linkis-demo-cg-entrance-858f74c868-xrd82 </span><span class="token number">5008</span><span class="token plain">:5005 --address</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token plain">.0.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">user            </span><span class="token number">10966</span><span class="token plain">   </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.1</span><span class="token plain">  </span><span class="token number">5053316</span><span class="token plain">  </span><span class="token number">30620</span><span class="token plain"> s001  S    </span><span class="token number">12</span><span class="token plain">:57AM   </span><span class="token number">0</span><span class="token plain">:00.11 kubectl port-forward -n linkis pod/linkis-demo-cg-linkismanager-6f96f69b8b-ns6st </span><span class="token number">5007</span><span class="token plain">:5005 --address</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token plain">.0.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">user            </span><span class="token number">10964</span><span class="token plain">   </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.1</span><span class="token plain">  </span><span class="token number">5064092</span><span class="token plain">  </span><span class="token number">31152</span><span class="token plain"> s001  S    </span><span class="token number">12</span><span class="token plain">:57AM   </span><span class="token number">0</span><span class="token plain">:00.10 kubectl port-forward -n linkis pod/linkis-demo-ps-publicservice-6bbf99fcd7-sc922 </span><span class="token number">5004</span><span class="token plain">:5005 --address</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token plain">.0.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">user            </span><span class="token number">10962</span><span class="token plain">   </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.1</span><span class="token plain">  </span><span class="token number">5051012</span><span class="token plain">  </span><span class="token number">31244</span><span class="token plain"> s001  S    </span><span class="token number">12</span><span class="token plain">:57AM   </span><span class="token number">0</span><span class="token plain">:00.12 kubectl port-forward -n linkis pod/linkis-demo-mg-gateway-68ddb8c547-xgvhn </span><span class="token number">5002</span><span class="token plain">:5005 --address</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token plain">.0.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">user            </span><span class="token number">10960</span><span class="token plain">   </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.1</span><span class="token plain">  </span><span class="token number">5053060</span><span class="token plain">  </span><span class="token number">31312</span><span class="token plain"> s001  S    </span><span class="token number">12</span><span class="token plain">:57AM   </span><span class="token number">0</span><span class="token plain">:00.13 kubectl port-forward -n linkis pod/linkis-demo-mg-eureka-0 </span><span class="token number">5001</span><span class="token plain">:5005 --address</span><span class="token operator">=</span><span class="token number">0.0</span><span class="token plain">.0.0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># After debugging is complete, you can stop port forwarding with the following command</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> ./scripts/remote-debug-proxy.sh stop </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- stopping port-forward </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">web</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">8087</span><span class="token plain">:8087-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- stopping port-forward </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">mg-eureka</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5001</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- stopping port-forward </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">mg-gateway</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5002</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- stopping port-forward </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">ps-publicservice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5004</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- stopping port-forward </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">cg-linkismanager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5007</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- stopping port-forward </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">cg-entrance</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5008</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- stopping port-forward </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">cg-engineconnmanager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5009</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- stopping port-forward </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">cg-engineplugin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> with mapping </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">local-</span><span class="token operator">&gt;</span><span class="token number">5010</span><span class="token plain">:5005-</span><span class="token operator">&gt;</span><span class="token plain">pod</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_y2LR" id="configure-the-ide-for-remote-debugging"></a>Configure the IDE for Remote Debugging<a class="hash-link" href="#configure-the-ide-for-remote-debugging" title="Direct link to heading">#</a></h4><p>Configure the IDE as follows to enable remote debugging:</p><p><img src="/assets/images/kube-jvm-remote-debug-0fbc0ecd7d2d6950369e95c80712c59f.png"></p><p>Turn on remote debugger
<img src="/assets/images/kube-jvm-remote-debug-start-0d2691c107f093e17c24113050336d4a.png"></p><p>Set a breakpoint and submit a job for debugging</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> ./scripts/login-pod.sh mg-gateway</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- login </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">mg-gateway</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;s bash ...</span></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">bash-4.2$ ./bin/./linkis-cli -engineType shell-1 -codeType shell -code &quot;echo </span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">hello</span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string" style="color:rgb(255, 121, 198)"> &quot;  -submitUser hadoop -proxyUser hadoop</span></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">=====Java Start Command=====</span></span><span class="token-line" style="color:#F8F8F2"><span class="token string" style="color:rgb(255, 121, 198)">exec /etc/alternatives/jre/bin/java -server -Xms32m -Xmx2048m -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/opt/linkis/logs/linkis-cli -XX:ErrorFile=/opt/linkis/logs/linkis-cli/ps_err_pid%p.log -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction=80 -XX:+DisableExplicitGC    -classpath /opt/linkis/conf/linkis-cli:/opt/linkis/lib/linkis-computation-governance/linkis-client/linkis-cli/*:/opt/linkis/lib/linkis-commons/public-module/*: -Dconf.root=/etc/linkis-conf -Dconf.file=linkis-cli.properties -Dlog.path=/opt/linkis/logs/linkis-cli -Dlog.file=linkis-client..log.20220925171540947077800  org.apache.linkis.cli.application.LinkisClientApplication &#x27;</span><span class="token plain">-engineType shell-1 -codeType shell -code </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;hello&quot;</span><span class="token plain">  -submitUser hadoop -proxyUser hadoop&#x27;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><img src="/assets/images/kube-jvm-remote-debug-breakpoint-2e8a5c98809db9e83cab0d249ee1e042.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="clean-up-the-environment"></a>Clean Up the Environment<a class="hash-link" href="#clean-up-the-environment" title="Direct link to heading">#</a></h3><p>After debugging, you can use the following command to clean up the entire environment:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> kind delete clusters test-helm                                              </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Deleted clusters: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;test-helm&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="other-useful-operations"></a>Other Useful Operations<a class="hash-link" href="#other-useful-operations" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_y2LR" id="fetch-logs"></a>Fetch Logs<a class="hash-link" href="#fetch-logs" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> kubectl logs -n linkis linkis-demo-cg-engineconnmanager-659bf85689-ddvhw -f</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">RUN_IN_FOREGROUND</span><span class="token operator">=</span><span class="token plain">true</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+ /opt/linkis/sbin/linkis-daemon.sh start cg-engineconnmanager</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Start to check whether the cg-engineconnmanager is running</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Start server, startup script:  /opt/linkis/sbin/ext/linkis-cg-engineconnmanager</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token plain">Java Start </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">Command</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">java   -DserviceName</span><span class="token operator">=</span><span class="token plain">linkis-cg-engineconnmanager -Xmx512M -XX:+UseG1GC -Xloggc:/var/logs/linkis/linkis-cg-engineconnmanager-gc.log -agentlib:jdwp</span><span class="token operator">=</span><span class="token plain">transport</span><span class="token operator">=</span><span class="token plain">dt_socket,server</span><span class="token operator">=</span><span class="token plain">y,suspend</span><span class="token operator">=</span><span class="token plain">n,address</span><span class="token operator">=</span><span class="token number">5005</span><span class="token plain">  -cp /etc/linkis-conf:/opt/linkis/lib/linkis-commons/public-module/*:/opt/linkis/lib/linkis-computation-governance/linkis-cg-engineconnmanager/* org.apache.linkis.ecm.server.LinkisECMApplication  --eureka.instance.prefer-ip-address</span><span class="token operator">=</span><span class="token plain">true  --eureka.instance.instance-id</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${spring.cloud.client.ip-address}</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${spring.application.name}</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${server.port}</span><span class="token plain"> </span><span class="token operator file-descriptor important">2</span><span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">OpenJDK </span><span class="token number">64</span><span class="token plain">-Bit Server VM warning: If the number of processors is expected to increase from one, </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">then</span><span class="token plain"> you should configure the number of parallel GC threads appropriately using -XX:ParallelGCThreads</span><span class="token operator">=</span><span class="token plain">N</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Listening </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> transport dt_socket at address: </span><span class="token number">5005</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">16</span><span class="token plain">:32:41.101 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> INFO  org.apache.linkis.common.conf.BDPConfiguration$ - ******************* Notice: The Linkis configuration </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"> is linkis.properties </span><span class="token operator">!</span><span class="token plain"> *******************</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">16</span><span class="token plain">:32:41.130 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> INFO  org.apache.linkis.common.conf.BDPConfiguration$ - *********************** Notice: The Linkis serverConf </span><span class="token function" style="color:rgb(80, 250, 123)">file</span><span class="token plain"> is linkis-cg-engineconnmanager.properties </span><span class="token operator">!</span><span class="token plain"> ******************</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">16</span><span class="token plain">:32:41.222 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> INFO  org.apache.linkis.LinkisBaseServerApp - Ready to start linkis-cg-engineconnmanager with args: --eureka.instance.prefer-ip-address</span><span class="token operator">=</span><span class="token plain">true</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">--eureka.instance.instance-id</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${spring.cloud.client.ip-address}</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${spring.application.name}</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${server.port}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_y2LR" id="entry-into-the-component-pod"></a>Entry into the Component Pod<a class="hash-link" href="#entry-into-the-component-pod" title="Direct link to heading">#</a></h4><p>Use <code>. /scripts/login-pod.sh &lt;component name&gt;</code> to access the component&#x27;s Pod to open a Bash for interactive operation, where the component name can be :</p><ul><li>cg-engineconnmanager</li><li>cg-engineplugin</li><li>cg-entrance</li><li>cg-linkismanager</li><li>mg-eureka</li><li>mg-gateway</li><li>ps-publicservice</li><li>web</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$</span><span class="token operator">&gt;</span><span class="token plain"> ./scripts/login-pod.sh cg-engineconnmanager</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- login </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">cg-engineconnmanager</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">&#x27;s </span><span class="token function" style="color:rgb(80, 250, 123)">bash</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bash-4.2$ </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">pwd</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/opt/linkis</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bash-4.2$  </span><span class="token function" style="color:rgb(80, 250, 123)">env</span><span class="token plain"> </span><span class="token operator">|</span><span class="token function" style="color:rgb(80, 250, 123)">grep</span><span class="token plain"> LINKIS</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">LINKIS_DEMO_PS_PUBLICSERVICE_SERVICE_HOST</span><span class="token operator">=</span><span class="token number">10.96</span><span class="token plain">.93.45</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">LINKIS_DEMO_CG_LINKISMANAGER_PORT_9101_TCP_PROTO</span><span class="token operator">=</span><span class="token plain">tcp</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">LINKIS_DEMO_WEB_PORT_8087_TCP_PORT</span><span class="token operator">=</span><span class="token number">8087</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">LINKIS_CLIENT_CONF_DIR</span><span class="token operator">=</span><span class="token plain">/etc/linkis-conf</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bash-4.2$ </span><span class="token function" style="color:rgb(80, 250, 123)">ps</span><span class="token plain"> aux </span><span class="token operator">|</span><span class="token function" style="color:rgb(80, 250, 123)">grep</span><span class="token plain"> linkis</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hadoop         </span><span class="token number">1</span><span class="token plain">  </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">11708</span><span class="token plain">  </span><span class="token number">2664</span><span class="token plain"> ?        Ss   </span><span class="token number">16</span><span class="token plain">:32   </span><span class="token number">0</span><span class="token plain">:00 /bin/bash /opt/linkis/sbin/linkis-daemon.sh start cg-engineconnmanager</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hadoop        </span><span class="token number">10</span><span class="token plain">  </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">11708</span><span class="token plain">  </span><span class="token number">2624</span><span class="token plain"> ?        S    </span><span class="token number">16</span><span class="token plain">:32   </span><span class="token number">0</span><span class="token plain">:00 </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"> /opt/linkis/sbin/ext/linkis-cg-engineconnmanager</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hadoop        </span><span class="token number">11</span><span class="token plain">  </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">0.0</span><span class="token plain">  </span><span class="token number">11712</span><span class="token plain">  </span><span class="token number">2536</span><span class="token plain"> ?        S    </span><span class="token number">16</span><span class="token plain">:32   </span><span class="token number">0</span><span class="token plain">:00 </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><span class="token plain"> /opt/linkis/sbin/ext/linkis-common-start</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hadoop        </span><span class="token number">12</span><span class="token plain">  </span><span class="token number">4.0</span><span class="token plain">  </span><span class="token number">3.2</span><span class="token plain"> </span><span class="token number">4146404</span><span class="token plain"> </span><span class="token number">400084</span><span class="token plain"> ?      Sl   </span><span class="token number">16</span><span class="token plain">:32   </span><span class="token number">0</span><span class="token plain">:35 java -DserviceName</span><span class="token operator">=</span><span class="token plain">linkis-cg-engineconnmanager -Xmx512M -XX:+UseG1GC -Xloggc:/var/logs/linkis/linkis-cg-engineconnmanager-gc.log -agentlib:jdwp</span><span class="token operator">=</span><span class="token plain">transport</span><span class="token operator">=</span><span class="token plain">dt_socket,server</span><span class="token operator">=</span><span class="token plain">y,suspend</span><span class="token operator">=</span><span class="token plain">n,address</span><span class="token operator">=</span><span class="token number">5005</span><span class="token plain"> -cp /etc/linkis-conf:/opt/linkis/lib/linkis-commons/public-module/*:/opt/linkis/lib/linkis-computation-governance/linkis-cg-engineconnmanager/* org.apache.linkis.ecm.server.LinkisECMApplication --eureka.instance.prefer-ip-address</span><span class="token operator">=</span><span class="token plain">true --eureka.instance.instance-id</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${spring.cloud.client.ip-address}</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${spring.application.name}</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">${server.port}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bash-4.2$ </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">exit</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">exit</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/apache/incubator-linkis-website/edit/dev/versioned_docs/version-1.3.0/development/debug-with-helm-charts.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/latest/development/debug"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Service Debugging Guide</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/latest/development/new-engine-conn"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Quickly Implement New Engine »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#preface" class="table-of-contents__link">Preface</a></li><li><a href="#introduction-to-dependency-tools" class="table-of-contents__link">Introduction to Dependency Tools</a><ul><li><a href="#version-requirements" class="table-of-contents__link">Version Requirements</a></li><li><a href="#introduction-to-helm-charts" class="table-of-contents__link">Introduction to Helm Charts</a></li><li><a href="#introduction-to-kind" class="table-of-contents__link">Introduction to KinD</a></li></ul></li><li><a href="#linkis-containerized-components" class="table-of-contents__link">Linkis Containerized Components</a><ul><li><a href="#linkis-images" class="table-of-contents__link">Linkis Images</a></li><li><a href="#linkis-helm-chart" class="table-of-contents__link">Linkis Helm Chart</a></li><li><a href="#ldh" class="table-of-contents__link">LDH</a></li><li><a href="#kind-cluster" class="table-of-contents__link">KinD Cluster</a></li></ul></li><li><a href="#developing-and-debugging-with-linkis-containerized-components" class="table-of-contents__link">Developing and Debugging with Linkis Containerized Components</a><ul><li><a href="#create-debugging-environment" class="table-of-contents__link">Create Debugging Environment</a></li><li><a href="#debugging-components" class="table-of-contents__link">Debugging Components</a></li><li><a href="#clean-up-the-environment" class="table-of-contents__link">Clean Up the Environment</a></li><li><a href="#other-useful-operations" class="table-of-contents__link">Other Useful Operations</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Linkis</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/latest/introduction">Document</a></li><li class="footer__item"><a class="footer__link-item" href="/faq/main">FAQ</a></li><li class="footer__item"><a href="https://github.com/apache/incubator-linkis/releases" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Releases<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/apache/incubator-linkis" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/apache/incubator-linkis/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Issue Tracker<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/apache/incubator-linkis/pulls" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Pull Requests<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Subscribe Mailing List</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/community/how-to-subscribe">How to Subscribe</a></li><li class="footer__item"><a href="mailto:dev-subscribe@linkis.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Subscribe Mail<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://lists.apache.org/list.html?dev@linkis.apache.org" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Mail Archive<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div><img style="height:50px" alt="Apache Software Foundation" src="/img/incubator-logo.svg"><p style="color: #999999;  padding: 0 20px 30px;font-weight:400;text-align:left">Apache Linkis is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</p><p></p>
             <p style="padding: 0 20px 30px;color: #999999;font-weight: 400;"> Copyright © 2022 The Apache Software Foundation. Licensed under the Apache License, Version 2.0. Apache Linkis, Apache Incubator, Apache, the Apache feather logo, the Apache Linkis logo and the Apache Incubator project logo are trademarks of The Apache Software Foundation.</p>
             <div></div></div></div></div></div></footer></div>
<script src="/assets/js/runtime~main.8c2fcd23.js"></script>
<script src="/assets/js/main.ffdafd4c.js"></script>
</body>
</html>